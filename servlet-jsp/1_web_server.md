# Web Server 개요

## 🔖 웹 프로그래밍 간단한 배경

- 클라이언트, 서버의 등장. 
- 클라이언트에서 요청하면 서버에서 해당하는 소프트웨어를 실행해주는 형태.
- 소켓, RPC등, 클라이언트와 서버간의 전달방법이 여러가지가 있다.

### Client-Server programming의 한계

> - Client: 프로그램 업데이트의 어려움(재설치)
> - Data: 데이터 전송에 대한 구현의 어려움

소프트웨어 업데이트의 경우 서버는 한번만 수행하면 되지만 클라이언트들은 각각에 대해 업데이트를 전부 수행해주어야 한다. 과거 소프트웨어 업데이트는 자동화가 아닌 **삭제-재설치**의 과정이 반복의 연속이었다.

<br>

**Web은 이런 부담을 해결해 줄 수 있다는 점에서 각광을 받기 시작**

Web을 통해 다음과 같은 변화가 생겼다.
- 클라이언트, 서버 프로그래밍을 웹에 얹을 수 있게 되었다.
- 단순히 클라이언트 요청에 서버가 정해진 page를 보내주는 것이 아니다. (**정적인 페이지**)
- 요청에 따라 변화할 수 있는 부분을 서버에서 처리해주어 page를 동적으로 내보내준다. (**동적인 페이지**)

이렇게 되면 사용자 요청에 따라 변화할 수 있는 부분을 서버에서 관리, 처리해주기 때문에 클라이언트는 브라우저외의 다른 프로그램은 필요 없어지게 된다.  
(**프로그램 재설치의 문제 해결**)

Client-Server 프로그램 → **웹 프로그램(Client X, Server개발)**

<br>

요즘에는 javascript를 이용해 page를 요청하는 것이 아닌 **데이터 요청**으로 바뀌었다. 그 외 나머지 page부분은 front에서 담당하게 되었다.  
(**Front-end, Back-end 개념 등장**)

<br>

### 정적 페이지 (Static Page)
DB에서 데이터를 가져오는 등의 별도의 서버처리를 하지 않고 어떤 사용자든 상관없이 동일한 페이지를 내보낸다.  
html, css, js, image 등의 요소들이 해당
### 동적 페이지 (Dynamic Page)
요청에 따라 DB에서 데이터를 가져오고 처리를 하는 등의 서버에서 요청마다 해당 작업을 수행하고 난 결과를 페이지에 적용시켜 내보낸다.

<br>

## 🔖 Web Server와 WAS

### Web Server
- 클라이언트가 요청한 **정적**인 콘텐츠를 HTTP 프로토콜을 통하여 제공해주는 서버(정적인 페이지 제공이 핵심)
- 클라이언트 요청에 따라 동적인 처리가 필요할 때 Container로 보내주는 역할 담당
- Apache HTTP Server, Nginx, Node.js(자체 웹서버 내장), Google Web Server 등이 있다
### Container
- 클라이언트 요청에 따라 동적으로 데이터를 가져와 정적인 페이지로 생성해주는 소프트웨어 모듈
- java기반에서는 `Servlet` Container를 사용
### WAS
- 웹서버와 Container를 붙여놓은 서버
- 웹서버로 오는 요청 중 동적인 서비스 처리를 담당한다

<br>

user list에 대한 정보들을 요청한 상황을 예로 들면 `GET member/list`를 해야한다. 그런데 user 정보는 사용자가 개개인의 정보를 직접 수정하고 삭제하 수 있기 때문에 시시각각 데이터가 변화한다. 즉 서버에서 정적으로 응답을 해줄 수가 없다. 결국 서버는 DB와 연결해서 데이터를 받아 그 정보들을 가공해 응답을 해주어야 한다. 여기서 WAS가 등장한 것이다.

- Server Application: 동적으로 문서를 만들기 위한 코드들
- Web Server: 코드를 실행할 수 있는 실행환경
- **WAS: 코드를 찾아서 실행해줄 수 있는 환경**

WAS는 apache tomcat, JEUS 등이 있다. 

<br>

## 🔖 tomcat + web server 연동

tomcat은 웹서버와 WAS 둘 다 포괄하지만 WAS로서 기능을 한다. (사실 WAS가 web server + container)  
하지만 html과 같은 정적인 페이지를 로딩하는데 다른 웹서버보다 속도가 느리다.  
이를 해결하기 위해 정적인 페이지 처리를 담당하는 기능으로써 다른 웹서버와 연동해 동적인 처리에만 집중하도록 했다.  

<p><img src="https://user-images.githubusercontent.com/41675375/80943603-8f27bd80-8e22-11ea-9f44-9915b108653c.png" width="850" height="200"></p>


- Nginx, Apache 서버와 같은 웹서버와 연동
- jsp파일, 동적인 처리 필요할 때 tomcat으로 넘김


<br>
<br>


### 🔖 참고

- [웹서버와 WAS, 컨테이너 개념 설명 참고](http://melonicedlatte.com/web/2019/06/23/210300.html)









